<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arctic Sky Explorer | Seasonal Dynamics Explorer</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        :root {
            color-scheme: light;
            --bg: #f5f8fb;
            --panel: #ffffff;
            --accent: #0f8cc6;
            --accent-dark: #0b3c5d;
            --muted: #7a8ca0;
            --text: #1f2a37;
            --shadow: 0 18px 40px rgba(15, 140, 198, 0.12);
            --border: #dbe4f0;
            --radius: 14px;
        }
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }
        main {
            max-width: 1460px;
            margin: 0 auto;
            padding: 32px 24px 96px;
        }
        header { display: grid; gap: 18px; margin-bottom: 28px; }
        header h1{
            margin: 0;
            font-size: clamp(2.2rem, 4vw, 3rem);
            font-weight: 700;
            color: var(--accent-dark);
        }
        header p {
            margin: 0;
            max-width: 760px;
            font-size: 1.05rem;
            color: var(--muted);
        }
        .meta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-bottom: 28px;
        }
        .meta-card {
            background: var(--panel);
            border-radius: var(--radius);
            padding: 18px 20px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
        }
        .meta-card h3 {
            margin: 0 0 6px;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--accent-dark);
        }
        .meta-card p {
            margin: 0;
            font-size: 0.95rem;
        }
        .controls{
            background: var(--panel);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 22px 26px;
            margin-bottom: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
        }
        .filter-group{ display:flex; flex-direction:column; gap:10px; }
        .filter-group label{
            font-size:0.88rem;
            font-weight:600;
            color:var(--accent-dark);
        }
        select{
            appearance:none;
            border:1px solid var(--border);
            border-radius:999px;
            padding:10px 18px;
            font-size:0.95rem;
            font-weight:500;
            background:#eef4f8;
            color:var(--accent-dark);
        }
        button{
            appearance: none;
            border: none;
            border-radius: 999px;
            padding: 10px 18px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }
        button:hover{ transform:translateY(-1px); }
        button:active{ transform:translateY(0); }
        .toggle-button{
            background:#eef4f8;
            color:var(--accent-dark);
            border:1px solid transparent;
        }
        .toggle-button.active{
            background:var(--accent-dark);
            color:#fff;
            box-shadow:0 10px 20px rgba(11, 60, 93, 0.25);
        }
        .site-toggle{
            display:flex;
            align-items:center;
            gap:8px;
            padding:8px 14px;
            border-radius:999px;
            background:#eef4f8;
            color:var(--accent-dark);
            font-size:0.85rem;
            border:1px solid transparent;
        }
        .site-toggle.active{
            background:var(--accent);
            color:#fff;
            box-shadow:0 6px 14px rgba(15,140,198,0.25);
        }
        .site-toggle span{
            width:10px;
            height:10px;
            border-radius:50%;
            background:currentColor;
        }
        .season-group, .site-group{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
        }
        .viz-card{
            background: var(--panel);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 22px 24px 26px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        .viz-header{ display:grid; gap:6px; }
        .viz-title{ margin:0; font-size:1.2rem; font-weight:600; color:var(--accent-dark); }
        .viz-subtitle{ margin:0; font-size:0.9rem; color:var(--muted); }
        svg{
            width: 100%;
            height: auto;
        }
        .legend-container{
            display:flex;
            flex-wrap:wrap;
            gap:14px;
            font-size:0.85rem;
            color:var(--muted);
        }
        .legend-item{
            display:flex;
            align-items:center;
            gap:8px;
            padding:6px 10px;
            border-radius:12px;
            background:#f0f6fa;
            border:1px solid rgba(15,140,198,0.12);
        }
        .legend-dot{
            width:12px;
            height:12px;
            border-radius:50%;
        }
        .viz-summary{
            font-size:0.9rem;
            color:var(--muted);
            line-height:1.5;
        }
        .writeup{
            margin-top:40px;
            background: var(--panel);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            padding: 26px 28px;
            display: grid;
            gap: 18px;
        }
        .writeup h2{ margin:0; font-size:1.35rem; color:var(--accent-dark); }
        .writeup h3{ margin:16px 0 8px; font-size:0.95rem; letter-spacing:0.05em; color:var(--accent-dark); text-transform:uppercase; }
        .writeup p{ margin:0; color:var(--muted); font-size:0.95rem; }
        .writeup ul{ margin:0; padding-left:20px; color:var(--muted); font-size:0.95rem; }
        a{ color:var(--accent); font-weight:600; text-decoration:none; }
        a:hover{ text-decoration:underline; }
        @media(max-width:820px){
            select{ width:100%; }
        }
    </style>
</head>
<body>
    <main>
        <header>
            <h1>Arctic Sky Explorer</h1>
            <p>Explore how daylight hours and surface brightness evolve for five Arctic monitoring stations. Use the filters to focus on a season, toggle specific sites, and swap metrics within a single integrated view.</p>
        </header>

        <section class="meta-grid">
            <article class="meta-card">
                <h3>Team</h3>
                <p>Amrutha Potluri (apotluri@ucsd.edu)&middot; Audrey Chung (auchung@ucsd.edu) &middot; Faline Le (fnle@ucsd.edu)&middot; Katie Hannigan (khannigan@ucsd.edu)</p>
            </article>
            <article class="meta-card">
                <h3>Dataset</h3>
                <p>NASA MODIS Terra MOD09GA &amp; MOD10A1 (GIBS access, 2023 Arctic subset)</p>
            </article>
            <article class="meta-card">
                <h3>Question</h3>
                <p>How do seasonal shifts in daylight and surface brightness relate across the Arctic basin?</p>
            </article>
            <article class="meta-card">
                <h3>Exploratory Work</h3>
                <p><a href="exploratory/exploratory.html">View exploratory sketches</a></p>
            </article>
        </section>

        <section class="controls">
            <div class="filter-group">
                <label for="metric-select">Metric</label>
                <select id="metric-select">
                    <option value="brightnessIndex">Surface brightness index</option>
                    <option value="daylightHours">Daylight hours</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Season filter</label>
                <div class="season-group" id="season-filter"></div>
            </div>
            <div class="filter-group">
                <label>Site focus</label>
                <div class="site-group" id="site-filter"></div>
                <button id="reset-filters" class="toggle-button" style="width:max-content;">Reset filters</button>
            </div>
        </section>

        <article class="viz-card">
            <div class="viz-header">
                <h2 class="viz-title">Seasonal Dynamics &middot; Single View</h2>
                <p class="viz-subtitle">Lines track the selected metric across the months for each active station. Hover for detailed values and compare how seasonal shifts differ between sites.</p>
            </div>
            <div id="viz-root"></div>
            <div class="legend-container" id="legend"></div>
            <p class="viz-summary" id="viz-summary"></p>
        </article>

        <section class="writeup" id="writeup">
            <h2>Design &amp; Process Notes</h2>
        
            <div>
                <h3>Design Rationale</h3>
                <p>
                    Our visualization goal was to make seasonal dynamics in the Arctic both comparable and continuous. 
                    Because our data involved monthly values for two linked metrics — <em>surface brightness index</em> 
                    and <em>daylight hours</em> — across five distinct sites, we needed a layout that emphasized temporal flow 
                    while preserving regional contrast.
                </p>
                <p>
                    We chose a <strong>multi-line chart</strong> with a shared time axis for several reasons:
                </p>
                <ul>
                    <li><strong>Temporal coherence:</strong> A single horizontal axis allows users to intuitively follow the seasonal arc from January through December, reinforcing the cyclical nature of Arctic light and surface changes.</li>
                    <li><strong>Comparative efficiency:</strong> Overlaying all sites in one coordinate system makes it easy to identify synchronized trends (like shared midsummer peaks) and regional deviations (such as Greenland’s persistent brightness plateau).</li>
                    <li><strong>Compactness:</strong> With limited screen space, a combined plot avoids fragmentation that would come from separate small multiples.</li>
                </ul>
                <p>
                    Additional encoding choices:
                </p>
                <ul>
                    <li><strong>X-axis:</strong> Encodes months categorically to emphasize periodicity rather than exact duration.</li>
                    <li><strong>Y-axis:</strong> Dynamically bound to the currently selected metric (brightness or daylight) to maintain interpretability without distortion.</li>
                    <li><strong>Line color:</strong> Perceptually distinct and colorblind-safe palette to differentiate sites.</li>
                    <li><strong>Line weight &amp; smoothing:</strong> Moderate stroke width and subtle smoothing highlight the seasonal rhythm without visual clutter.</li>
                    <li><strong>Annotations &amp; summaries:</strong> Responsive textual summary updates beneath the chart, narrating current selections.</li>
                </ul>
                <p>
                    We considered alternatives such as small multiples or dual-axis plots but found them less effective. 
                    Small multiples fragmented comparisons, and dual axes risked misinterpretation due to differing scales. 
                    The single multi-line chart combined with metric toggle provided the clearest and most flexible approach.
                </p>
            </div>
        
            <div>
                <h3>Interaction Techniques</h3>
                <ul>
                    <li>Season toggles remap the horizontal domain to focus on Winter, Spring, Summer, or Fall for quick seasonal comparisons.</li>
                    <li>Metric toggle rebinds the y-axis and legend between surface brightness and daylight hours, supporting cross-metric exploration.</li>
                    <li>Site toggles allow selective comparisons; legend and narrative text update dynamically to reflect active stations.</li>
                    <li>Hover tooltips provide details-on-demand for site, month, and exact metric values.</li>
                    <li>Reset filters restore the full-year view with a single click.</li>
                </ul>
            </div>
        
            <div>
                <h3>Data Processing</h3>
                <p>
                    We sourced NASA MODIS Terra data (MOD09GA and MOD10A1 products) for the Arctic via NASA GIBS. 
                    Monthly averages were computed for each of the five sites. Surface brightness was derived from reflectance values, 
                    and daylight hours were computed using astronomical formulas based on latitude. The data was cleaned, aggregated, 
                    and structured into a tidy CSV format for D3 visualization.
                </p>
                <p>
                    Challenges included ensuring temporal and spatial consistency and dealing with cloud coverage variations in the satellite imagery.
                </p>
            </div>
        
            <div>
                <h3>Team Workflow</h3>
                <p>
                    <strong>Data Wrangling:</strong> Amrutha (12 hours) — preprocessing raw MODIS imagery, computing monthly averages, 
                    and deriving daylight hours.
                </p>
                <p>
                    <strong>Interaction Design &amp; D3 Implementation:</strong> Audrey (14 hours) and Katie (12 hours) — building the multi-line chart, implementing metric toggles, hover tooltips, and responsive legends, and refining transitions and dynamic axes.
                </p>
                <p>
                    <strong>Visual Polish &amp; Narrative Framing:</strong> Faline (8 hours) — adjusting colors, typography, annotations, and dynamic summaries to highlight seasonal patterns.
                </p>
                <p>
                    <strong>Integration &amp; Deployment:</strong> All team members (6 joint hours) — combining code, debugging interactions, and deploying to GitHub Pages.
                </p>
                <p>
                    Total effort: ~52 people-hours. The most time-intensive aspects were data wrangling from NASA GIBS and fine-tuning D3 interactivity for smooth, bug-free transitions.
                </p>
            </div>
        </section>
    </main>
    <script src="js/app.js"></script>
</body>
</html>
